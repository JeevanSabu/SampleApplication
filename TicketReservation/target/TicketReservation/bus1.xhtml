<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns = "http://www.w3.org/1999/xhtml"
   xmlns:f = "http://java.sun.com/jsf/core"    
   xmlns:h = "http://java.sun.com/jsf/html"
   xmlns:p = "http://primefaces.org/ui">
   
   <h:head>
      <title>Ticket Reservation|Bus Seat Selection</title>
      <h:outputStylesheet library = "css" name = "styles.css"  /> 
      <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"/>	
      <!-- 
       -->
	  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
	  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
      <h:outputScript library = "js" name = "script.js"  /> 
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"/>
   </h:head>

   <h:body>
   	  
	<header class="header bus-header">
	    Ticket Reservation Seat Selection
	    <h:form id="user_icon_form" styleClass="user-icon-form">  
		    <p:commandLink id="user_icon_button">
		    	<i class="pi pi-user icon home-user-icon float-right"></i>
		    </p:commandLink>    
		    <p:overlayPanel id="user_overlay_panel" styleClass="user-overlay-panel" for="user_icon_button" hideEffect="fade">
		    	<h:form id="user_panel_form">      
		    		<p:panelGrid columns="2" cellpadding="10" styleClass="overlay-panel-grid no-border">
				        <h:outputText value="Username : " />
				        <h:outputText value="#{userBean.username}" />
				        <h:outputText value="Last Login : " />
				        <h:outputText value=" " />
				        <h:inputHidden/>
			    		<p:commandButton value="LogOut" action="#{userModel.logout()}" id="logout_button" styleClass="logout-button"/>
		    		</p:panelGrid>
		    	</h:form>
		    </p:overlayPanel>
	    </h:form>
	</header>
	<div id="bus" class="bus middle-align">
	<p:dataGrid id="bus_seats" var="busSeat" value="#{busSeatsView.busSeats}" styleClass="bus-seats" columns="4" layout="grid">
	    <f:facet name="header">
    		<span class="color-dot red"/>booked seats<span class="color-dot green"/>Selected seats
		</f:facet>
		
		<h:outputLink value = "#" styleClass="#{busSeat.status}" onclick="selection(this,'#{busSeat.seatNo}')">
			<img class="bus-image" src="/TicketReservation/resources/images/chair.png"/>
		</h:outputLink>
		
        <f:facet name="footer">
	    	<h:form id="selected_bus" styleClass="selected-bus">
		    	<p:panelGrid columns="2" styleClass="no-border">
		    		<p:outputLabel for="selected_seats" value="Seat no : "/>
					<p:inputText id="selected_seats" styleClass="selected-seats" value="#{busBean.selectedSeat}"/>
					<h:inputHidden value="1"/>
					<p:commandButton id="pay_button" icon="fa fa-inr" styleClass="pay-button" action="#{busModel.getResult()}" value="1200"/>
		    	</p:panelGrid>
	    	</h:form>
		</f:facet>
    </p:dataGrid>
	
	</div>
   </h:body>
</html>